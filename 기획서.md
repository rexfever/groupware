# 엔터프라이즈 포탈 그룹웨어 기획서

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
- 기업 내 업무 효율성 향상을 위한 통합 포탈 시스템 구축
- 임직원 간 커뮤니케이션 및 협업 도구 제공
- 전자결제, 게시판, 임직원 검색 등 핵심 업무 기능 통합

### 1.2 목표 사용자
- 기업 임직원 (관리자, 일반 사용자)
- 부서별 권한 관리

### 1.3 핵심 가치
- 직관적이고 사용하기 쉬운 UI/UX
- 반응형 디자인으로 다양한 디바이스 지원
- 빠른 성능과 안정성

## 2. 기능 요구사항

### 2.1 홈 화면
- **포틀릿 기반 대시보드**
  - 사용자별 커스터마이징 가능한 포틀릿 배치
  - 드래그 앤 드롭으로 포틀릿 위치 변경
  - 포틀릿 표시/숨김 설정

- **주요 포틀릿 종류**
  - 오늘의 일정
  - 미결재 문서
  - 최근 게시글
  - 공지사항
  - 빠른 메뉴
  - 날씨/정보
  - 조직도 미리보기

- **역할별 권한 및 기능**
  - **일반 사용자**
    - 기본 포틀릿 조회 (자신의 일정, 미결재 문서, 최근 게시글 등)
    - 포틀릿 레이아웃 커스터마이징
    - 포틀릿 표시/숨김 설정
    - 빠른 메뉴 포틀릿 커스터마이징
    - 자신의 부서 조직도 미리보기
  
  - **부서 관리자**
    - 일반 사용자 권한 포함
    - 부서 내 미결재 문서 통계 포틀릿 (부서원 문서 포함)
    - 부서 게시판 최근 게시글 포틀릿
    - 부서 조직도 전체 조회 포틀릿
    - 부서 통계 포틀릿 (활성 사용자, 문서 처리 현황 등)
  
  - **시스템 관리자**
    - 모든 포틀릿 접근 가능
    - 시스템 전체 통계 포틀릿
    - 전체 조직도 조회
    - 시스템 모니터링 포틀릿 (서버 상태, 사용자 활동 등)
    - 포틀릿 관리 기능 (기본 포틀릿 설정, 권한 관리)

### 2.2 네비게이션 시스템
- **상단 메뉴**
  - 로고/브랜딩 영역
  - 메인 메뉴 (홈, 전자결제, 게시판, 임직원, 설정 등)
  - 알림 아이콘
  - 사용자 프로필/로그아웃

- **좌측 사이드바 메뉴**
  - 상단 메뉴 선택 시 해당 섹션의 서브 메뉴 표시
  - 접기/펼치기 기능
  - 현재 페이지 하이라이트

- **역할별 메뉴 접근 권한**
  - **일반 사용자**
    - 홈: 접근 가능
    - 전자결제: 접근 가능 (자신의 문서만)
    - 게시판: 접근 가능 (권한이 있는 게시판만)
    - 임직원: 접근 가능 (검색 및 기본 정보 조회)
    - 조직도: 접근 가능 (전체 조직도 조회)
    - 설정: 접근 가능 (개인 설정만)
    - 관리자: 접근 불가
  
  - **부서 관리자**
    - 일반 사용자 권한 포함
    - 전자결제: 부서 내 모든 문서 조회 가능
    - 게시판: 부서 게시판 관리 메뉴 추가
    - 임직원: 부서 내 임직원 상세 정보 조회
    - 조직도: 부서 조직도 상세 조회 및 관리
    - 설정: 부서 설정 메뉴 추가 (권한 있는 경우)
    - 관리자: 접근 불가
  
  - **게시판 관리자**
    - 일반 사용자 권한 포함
    - 게시판: 관리 메뉴 추가 (담당 게시판만)
  
  - **시스템 관리자**
    - 모든 메뉴 접근 가능
    - 조직도: 전체 조직도 관리
    - 관리자: 모든 관리 기능 접근
    - 시스템 설정: 전체 시스템 설정 접근

### 2.3 임직원 검색
- **Active Directory 연동**
  - AD에서 임직원 정보 자동 동기화
  - LDAP/LDAPS 프로토콜을 통한 AD 연결
  - 주기적 동기화 (스케줄링) 및 실시간 동기화 옵션
  - AD 그룹 기반 권한 매핑
  - 조직 구조 (OU) 기반 부서 자동 매핑
  - AD 속성 매핑 (이름, 이메일, 전화번호, 부서, 직급 등)

- **검색 기능**
  - 이름, 사번, 부서, 직급으로 검색
  - 실시간 검색 자동완성
  - 고급 검색 옵션 (부서별, 직급별 필터)
  - AD 동기화 상태 표시

- **임직원 정보 표시**
  - 프로필 사진 (AD에서 가져오기 또는 업로드)
  - 기본 정보 (이름, 사번, 부서, 직급, 이메일, 전화번호)
  - AD 계정 정보 (사용자명, 계정 상태)
  - 조직도에서의 위치
  - 연락처 바로가기 (이메일, 전화, 메신저)

- **역할별 권한 및 기능**
  - **일반 사용자**
    - 전체 임직원 검색 (기본 정보만)
    - 이름, 사번, 부서, 직급으로 검색
    - 검색 결과 기본 정보 조회 (이름, 부서, 직급, 이메일)
    - 연락처 바로가기 (이메일, 전화)
    - 조직도에서의 위치 조회
    - 상세 정보 제한 (전화번호, 내선번호 등 일부 정보 제한 가능)
  
  - **부서 관리자**
    - 일반 사용자 권한 포함
    - 부서 내 임직원 상세 정보 조회 (전화번호, 내선번호 포함)
    - 부서 조직도 전체 조회
    - 부서 내 임직원 통계 조회
    - 부서원 정보 일괄 조회
  
  - **인사 담당자 (HR)**
    - 모든 임직원 상세 정보 조회
    - 전체 조직도 조회
    - 임직원 통계 및 분석
    - 임직원 정보 수정 권한 (시스템 관리자 승인 시)
  
  - **시스템 관리자**
    - 모든 임직원 정보 조회 및 관리
    - AD 동기화 상태 모니터링
    - 임직원 정보 수정/삭제
    - 전체 조직도 관리
    - 임직원 검색 권한 설정

### 2.4 전자결제
- **결제 문서 관리**
  - 결제 문서 작성 (품의서, 지출결의서, 휴가신청서 등)
  - 결제 라인 설정
  - 문서 양식 선택
  - 첨부파일 업로드

- **결제 프로세스**
  - 결제 대기 문서 목록
  - 결제 진행 현황
  - 결제 완료 문서 목록
  - 반려 문서 관리
  - 결제 이력 조회

- **알림 기능**
  - 결제 요청 알림
  - 결제 완료 알림
  - 반려 알림

- **역할별 권한 및 기능**
  - **일반 사용자**
    - 자신이 작성한 문서 조회/수정/삭제 (결제 진행 전만)
    - 결제 대기 문서 작성 및 제출
    - 자신의 문서 결제 현황 조회
    - 자신의 문서 결제 이력 조회
    - 임시저장 문서 관리
  
  - **결제자 (Approver)**
    - 결제 대기 문서 조회 (자신이 결제자로 지정된 문서)
    - 결제 승인/반려
    - 결제 의견 작성
    - 결제 완료 문서 조회 (자신이 승인한 문서)
    - 결제 통계 조회 (자신의 결제 현황)
  
  - **부서 관리자**
    - 부서 내 모든 문서 조회 (부서원이 작성한 문서)
    - 부서 내 문서 통계 조회
    - 부서 내 결제 현황 모니터링
    - 부서원 문서 대리 작성 권한 (설정 시)
    - 부서 내 문서 일괄 조회 및 검색
  
  - **시스템 관리자**
    - 모든 문서 조회 및 관리
    - 모든 문서 삭제 권한
    - 결제 양식/템플릿 관리
    - 결제 라인 기본값 설정
    - 전체 결제 통계 및 보고서
    - 시스템 설정 관리

### 2.5 게시판
- **게시판 종류**
  - 공지사항 (전체 공지, 부서별 공지)
  - 자유게시판
  - 자료실
  - Q&A
  - 부서별 게시판

- **게시글 기능**
  - 글 작성/수정/삭제
  - 파일 첨부
  - 댓글/답글
  - 좋아요/조회수
  - 검색 기능
  - 카테고리/태그

- **역할별 권한 및 기능**
  - **일반 사용자**
    - 게시판 읽기 (권한이 있는 게시판만)
    - 게시글 작성 (쓰기 권한이 있는 게시판만)
    - 자신이 작성한 게시글 수정/삭제
    - 댓글 작성/수정/삭제 (자신의 댓글만)
    - 좋아요/조회
    - 게시글 검색
  
  - **게시판 관리자**
    - 담당 게시판의 모든 게시글 조회
    - 게시글 삭제 (타인이 작성한 게시글 포함)
    - 게시글 이동 (다른 게시판으로)
    - 게시글 고정 (공지로 설정)
    - 댓글 삭제 (타인의 댓글 포함)
    - 게시판 설정 수정
    - 게시판 통계 조회
    - 카테고리 관리
  
  - **부서 관리자**
    - 부서 게시판 관리 권한
    - 부서 게시판의 모든 게시글 관리
    - 부서 게시판 통계 조회
  
  - **시스템 관리자**
    - 모든 게시판 조회 및 관리
    - 모든 게시판 생성/수정/삭제
    - 모든 게시글 조회/삭제/이동
    - 모든 댓글 삭제
    - 게시판 권한 설정
    - 전체 게시판 통계 조회

- **게시판별 권한 설정**
  - 읽기 권한: 전체, 부서별, 역할별, 개인별
  - 쓰기 권한: 전체, 부서별, 역할별, 개인별
  - 관리 권한: 게시판 관리자 지정
  - 공지 작성 권한: 역할별 설정

### 2.6 조직도
- **조직도 표시**
  - 트리 구조로 조직도 표시
  - 부서별 계층 구조 시각화
  - 임직원 정보 표시 (이름, 직급, 프로필 사진)
  - 확대/축소 기능
  - 검색 기능 (부서명, 임직원명으로 검색)
  - 현재 사용자 위치 하이라이트

- **조직도 기능**
  - 전체 조직도 조회
  - 부서별 조직도 조회
  - 임직원 클릭 시 상세 정보 모달
  - 부서 클릭 시 부서 정보 및 부서원 목록
  - 조직도 인쇄 기능
  - 조직도 이미지 내보내기 (PNG, PDF)
  - 조직도 필터링 (부서별, 직급별)

- **AD 연동**
  - AD OU 구조 기반 자동 조직도 생성
  - AD 동기화 시 조직도 자동 업데이트
  - AD 그룹 표시 옵션

- **역할별 권한 및 기능**
  - **일반 사용자**
    - 전체 조직도 조회 (기본 정보만)
    - 자신의 부서 조직도 상세 조회
    - 임직원 기본 정보 조회 (이름, 부서, 직급, 이메일)
    - 조직도 검색 (부서명, 임직원명)
    - 조직도 인쇄 (자신이 조회 가능한 범위만)
  
  - **부서 관리자**
    - 일반 사용자 권한 포함
    - 부서 조직도 전체 조회 및 상세 정보
    - 부서 내 임직원 상세 정보 조회
    - 부서 조직도 인쇄 및 내보내기
    - 부서 조직도 필터링 및 정렬
  
  - **인사 담당자 (HR)**
    - 전체 조직도 조회 및 관리
    - 모든 임직원 상세 정보 조회
    - 조직도 구조 수정 권한 (시스템 관리자 승인 시)
    - 조직도 통계 및 분석
    - 조직도 인쇄 및 내보내기 (전체)
    - 조직도 버전 관리 (변경 이력)
  
  - **시스템 관리자**
    - 전체 조직도 조회 및 관리
    - 조직도 구조 생성/수정/삭제
    - 부서 구조 관리
    - 임직원 조직도 내 위치 수정
    - 조직도 권한 설정
    - 조직도 템플릿 관리
    - AD OU와 조직도 매핑 설정

### 2.7 관리자 기능
- **시스템 관리**
  - 사용자 관리 (추가, 수정, 삭제, 비활성화)
  - 역할 및 권한 관리 (RBAC)
  - AD 동기화 설정 및 관리
  - 시스템 설정 (사이트 정보, 메일 서버 등)
  - 로그 조회 및 모니터링

- **사용자 관리**
  - 전체 사용자 목록 조회
  - 사용자 정보 수정 (AD 연동 시 제한적)
  - 사용자 계정 활성화/비활성화
  - 사용자별 권한 할당
  - 사용자 활동 로그 조회
  - 대량 사용자 등록 (CSV/Excel)

- **조직 관리**
  - 부서/팀 구조 관리
  - AD OU와 부서 매핑 설정
  - 조직도 관리
  - 직급 체계 관리

- **게시판 관리**
  - 게시판 생성/수정/삭제
  - 게시판별 권한 설정
  - 게시글 관리 (삭제, 이동, 고정)
  - 카테고리 관리

- **전자결제 관리**
  - 결제 양식 관리 (템플릿 생성/수정)
  - 결제 라인 기본값 설정
  - 결제 통계 및 보고서
  - 결제 문서 관리 (전체 조회, 삭제)

- **포틀릿 관리**
  - 기본 포틀릿 설정
  - 포틀릿 권한 관리
  - 포틀릿 사용 통계

- **AD 동기화 관리**
  - AD 연결 설정 (서버 주소, 포트, 인증 정보)
  - 동기화 스케줄 설정
  - 수동 동기화 실행
  - 동기화 로그 조회
  - 동기화 오류 처리
  - AD 속성 매핑 설정
  - AD 그룹과 시스템 역할 매핑

- **시스템 모니터링**
  - 시스템 상태 대시보드
  - 사용자 활동 통계
  - API 사용량 모니터링
  - 에러 로그 조회
  - 성능 지표 (응답 시간, 동시 접속자 등)

- **역할별 관리자 권한**
  - **부서 관리자**
    - 부서 사용자 조회 (부서원만)
    - 부서 사용자 정보 수정 (제한적)
    - 부서 게시판 관리
    - 부서 전자결제 통계 조회
    - 부서 조직도 관리
    - 부서 설정 관리
  
  - **게시판 관리자**
    - 담당 게시판 관리
    - 게시판 설정 수정
    - 게시글 관리 (삭제, 이동, 고정)
    - 게시판 통계 조회
    - 카테고리 관리
  
  - **인사 담당자 (HR)**
    - 전체 사용자 조회
    - 사용자 정보 수정 (AD 연동 시 제한적)
    - 조직도 조회 및 관리
    - 직급 체계 관리
    - 사용자 통계 및 분석
  
  - **시스템 관리자 (최고 권한)**
    - 모든 관리 기능 접근
    - 사용자 관리 (추가, 수정, 삭제, 비활성화)
    - 역할 및 권한 관리 (RBAC)
    - AD 동기화 설정 및 관리
    - 시스템 설정 (사이트 정보, 메일 서버 등)
    - 모든 게시판 관리
    - 전자결제 전체 관리
    - 포틀릿 관리
    - 시스템 모니터링 및 로그 조회
    - 감사 로그 조회
    - 백업 및 복구 관리

## 3. 시스템 구조

### 3.1 아키텍처
```
Frontend (React)
    ↓
API Gateway
    ↓
Backend Services
    ├── Auth Service (인증/인가)
    ├── User Service (사용자 관리)
    ├── AD Sync Service (Active Directory 동기화)
    ├── Portal Service (포틀릿 관리)
    ├── Approval Service (전자결제)
    ├── Board Service (게시판)
    ├── Search Service (임직원 검색)
    └── Admin Service (관리자 기능)
    ↓
External Systems
    └── Active Directory (LDAP/LDAPS)
    ↓
Database (PostgreSQL)
    ├── User DB
    ├── Portal DB
    ├── Approval DB
    ├── Board DB
    └── Admin DB
```

### 3.2 기술 스택 제안

**Frontend**
- React 18+ (TypeScript)
- 상태 관리: Zustand 또는 Redux Toolkit
- UI 라이브러리: Material-UI 또는 Ant Design
- 스타일링: Tailwind CSS
- 라우팅: React Router
- HTTP 클라이언트: Axios
- 포틀릿: react-grid-layout

**Backend**
- Node.js (Express) 또는 Python (FastAPI)
- 인증: JWT, LDAP/Active Directory
- AD 연동: 
  - Node.js: ldapjs, activedirectory2
  - Python: ldap3, python-ldap
- 데이터베이스: PostgreSQL
- 파일 저장: AWS S3 또는 로컬 스토리지
- 캐싱: Redis
- 검색: Elasticsearch (선택사항)
- 스케줄링: node-cron (Node.js) 또는 APScheduler (Python)

**DevOps**
- 컨테이너: Docker
- 오케스트레이션: Docker Compose (개발) / Kubernetes (운영)
- CI/CD: GitHub Actions
- 모니터링: Prometheus + Grafana

## 4. 데이터베이스 설계 (주요 엔티티)

### 4.1 사용자
- 사용자 ID, 이름, 사번, 부서, 직급, 이메일, 전화번호, 프로필 사진, 권한
- AD 계정 정보: AD 사용자명, DN (Distinguished Name), 동기화 일시, 동기화 상태

### 4.2 포틀릿 설정
- 사용자 ID, 포틀릿 타입, 위치 정보 (x, y, w, h), 표시 여부

### 4.3 전자결제
- 문서 ID, 작성자, 문서 타입, 제목, 내용, 결제 라인, 현재 결제 단계, 상태, 첨부파일

### 4.4 게시판
- 게시글 ID, 게시판 ID, 작성자, 제목, 내용, 첨부파일, 조회수, 좋아요, 작성일, 수정일

### 4.5 관리자 설정
- AD 연결 설정: 서버 주소, 포트, 바인드 DN, 비밀번호, 동기화 주기
- AD 속성 매핑: 이름, 이메일, 부서, 직급 등
- 역할 및 권한: 역할 ID, 역할명, 권한 목록
- 시스템 설정: 사이트명, 로고, 메일 서버 등

### 4.6 동기화 로그
- 동기화 ID, 실행 일시, 상태, 동기화된 사용자 수, 오류 내용

## 5. 보안 요구사항

- 사용자 인증/인가 (JWT 기반, AD 인증 지원)
- 역할 기반 접근 제어 (RBAC)
- AD 통신 보안 (LDAPS 사용 권장)
- AD 인증 정보 암호화 저장
- HTTPS 통신
- SQL Injection 방지
- XSS 방지
- 파일 업로드 검증
- 세션 관리
- 관리자 기능 접근 제어 (IP 화이트리스트 옵션)
- 감사 로그 (관리자 작업 기록)

## 6. 성능 요구사항

- 페이지 로딩 시간: 2초 이내
- API 응답 시간: 500ms 이내
- 동시 사용자: 1000명 이상 지원
- 데이터베이스 쿼리 최적화
- 이미지/파일 최적화 및 CDN 활용

## 7. 개발 일정 (예시)

### Phase 1: 기초 구조 (3주)
- 프로젝트 초기 설정
- 인증/인가 시스템
- Active Directory 연동 기본 구조
- 기본 레이아웃 및 네비게이션

### Phase 2: 핵심 기능 (5주)
- 홈 화면 및 포틀릿 시스템
- Active Directory 동기화 구현
- 임직원 검색 (AD 연동)
- 게시판 기본 기능
- 관리자 기본 기능

### Phase 3: 전자결제 (3주)
- 전자결제 문서 작성
- 결제 프로세스 구현
- 알림 시스템

### Phase 4: 고도화 (2주)
- 성능 최적화
- 보안 강화 (AD 통신 보안 포함)
- 관리자 기능 완성
- 테스트 및 버그 수정

## 8. 향후 확장 계획

- 메신저/채팅 기능
- 일정 관리 (캘린더)
- 메일 시스템
- 프로젝트 관리
- 보고서/대시보드
- 모바일 앱 (React Native)

